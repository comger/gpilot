# # PRD：G-Pilot 智能政务助手 (V1.0 - 交付效率基石版)

**项目名称**：G-Pilot (Gov-Pilot)

**产品版本**：V1.0

**核心目标**：通过“演示即文档”与“动态脱敏”技术，将 ToG 系统手册编写效率提升 80% 以上。

---

## 1. 业务逻辑与用户场景

### ### 1.1 核心痛点

* **手册编写难**：频繁截图、手动打标、撰写操作步骤耗费大量精力。
* **脱敏合规难**：人工遮蔽敏感政务信息容易遗漏，且效率低下。
* **更新维护难**：系统 UI 微调导致整本手册作废。

### ### 1.2 用户画像

* **录制者 (PM/交付人员)**：专业能力强，追求极速交付，对合规性敏感。
* **阅读者 (政企/技术人员)**：政企用户偏好“傻瓜式”图文；技术人员关注逻辑参数。

---

## 2. 功能需求说明

### ### 2.1 智能感知录制器 (Intelligent Recorder)

* **[FR-01] 动作捕获**：插件需实时监听浏览器的 `Click`, `Input`, `Select`, `Drag` 等原生事件。
* **[FR-02] 语义快照**：每次有效交互时，自动捕获当前 DOM 状态及视觉截图。
* **[FR-03] 录制中配置 (Live Config)**：
* **悬浮控制台**：录制过程中，用户可随时唤起“脱敏设置”面板。
* **即点即脱敏**：用户点击页面上的任何文本（如“XX区公安局”），插件立即将其标记为“敏感变量”，并允许录制者输入“别名”（如“【某政务部门】”）。
* **全局策略**：支持预设正则规则（如身份证、手机号）自动扫描并脱敏。



### ### 2.2 隐私遮罩与影子替换 (Privacy Sanitization)

* **[FR-04] 视觉渲染遮罩**：在截图生成前，通过 Canvas 或 CSS Overlay 自动覆盖已识别的敏感区域。
* **[FR-05] 文本语义映射**：生成文档时，所有被标记的敏感字符串需全局替换为对应的别名，保持逻辑一致性。
* **[FR-06] 敏感信息自建库**：支持录制人员在录制中管理“项目敏感词库”，一次配置，全篇生效。

### ### 2.3 多模态文档生成引擎 (AI Doc Generator)

* **[FR-07] 视觉描述生成 (VLM)**：调用大模型识别截图内容，自动生成“第一步：点击[XX]按钮”等自然语言描述。
* **[FR-08] 角色化模版**：
* **业务视图**：以“截图 + 动作描述”为主，弱化后台参数。
* **配置视图**：包含页面 URL、DOM 属性、逻辑关联说明。


* **[FR-09] 多格式导出**：支持 .docx (带排版样式)、.pdf、.md。

---

## 3. 关键业务流程 (User Flow)

1. **启动**：PM 开启插件，选择“新建录制”，输入项目基础信息（项目名称、脱敏预设）。
2. **操作与干预**：
* PM 像平常演示一样操作系统。
* 发现页面有“敏感数据”  点击插件悬浮窗“标记脱敏”  在页面上点选目标文本  输入替换词。


3. **智能合成**：操作结束，点击“生成预览”。AI 自动将截图、脱敏后的文本、生成的步骤文案进行排版。
4. **校对与分发**：PM 预览无误后，一键导出双版本（业务版/技术版）手册。

---

## 4. 数据与安全性要求 (Security)

* **本地预处理**：脱敏识别和 DOM 替换必须在浏览器插件本地完成，确保上传至 AI 模型的数据已是脱敏后的“影子数据”。
* **API 安全**：支持用户配置私有大模型 API Key（如 OpenAI, Claude 或私有部署的 LLM）。
* **零配置存储**：默认不存储任何政务敏感数据，所有原始截图在文档生成后自动从缓存清理。

---

## 5. 技术架构输入建议 (For Antigravity)

### ### 5.1 核心技术选型

* **Frontend**: Chrome Extension (Manifest V3) + React.
* **Vision**: GPT-4o-mini 或更高版本的 VLM 用于视觉语义分析。
* **Storage**: IndexDB (用于录制过程中的临时大文件存储)。

### ### 5.2 核心算法逻辑 (Pseudo-code)

```typescript
interface RecordingStep {
  stepIndex: number;
  action: 'click' | 'input' | 'navigation';
  targetElement: string; // 语义化标签
  originalText: string;
  maskedText: string;   // 根据录制人员在过程中配置的别名进行替换
  screenshot: Blob;      // 经过脱敏覆盖处理后的图片
}

// 脱敏逻辑：在截图前通过 DOM 注入进行物理替换
function applyLiveMasking(element: HTMLElement, alias: string) {
  element.innerText = alias;
  element.classList.add('g-pilot-masked');
}

```

---

## 6. 验收标准 (Acceptance Criteria)

* [ ] 录制人员在录制过程中可以随时修改“别名配置”。
* [ ] 生成的 PDF 手册中，所有预设的敏感信息（项目名、行政区划、个人隐私）必须 100% 替换。
* [ ] 10 分钟的操作录制，AI 生成初稿文档的时间应小于 60 秒。

